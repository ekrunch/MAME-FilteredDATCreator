# MAME-FilteredDATCreator

This script uses XSLT to create filtered MAME DAT files for use in ROM validation/organization tools. It's source data is generated by MAME itself, either by downloading the "Full driver information in XML format" from [mamedev.org](https://www.mamedev.org/) or by running the MAME executable with the -listxml" / -lx parameter as documented in the [MAME docs](https://docs.mamedev.org/commandline/commandline-all.html#frontend-verbs). This could probably be done in XPath instead of XSLT for most uses, but XSLT has some advantages if someone wants to get creative in their templates.

## Acknowledgements

This project was inspired by the [mame-categories](https://codeberg.org/mameau/mame-categories) project, which everyone should check out. It uses XPath to filter the MAME XML into Categories (.ini files) that you can use in the UI. Shout out to the creator for the great work.

So why this project then? The difference is in the approach. MAME Categories makes a display filter, but all of the ROM files themselves are still there. The Filtered DAT Creator makes new DAT files for you to feed to your favorite ROM Management tool and just not have the files in the resulting collection. This results in a much smaller collection on the disk and can be idea for those who don't use the MAME frontend but use something else like RetroArch, LaunchB0ox, etc. If you're using something like Igir to manage ROMs, you can hardlink from your main collection to smaller DAT files created by Filtered DAT Creator to make specific sets for particular emulators or individuals without doubling the disk space. ('igir link' is super sweet for making subsets, I wish ROMVault did that)

And you can always use both, use this project to filter out the files you do not want and then use MAME Categories to get some additional filtering in the UI.

Special thanks to the people at [Progetto Snaps](https://www.progettosnaps.net/) for their contribution to the MAME community. They create a MAME [DAT](https://www.progettosnaps.net/dats/MAME/) archive, categorized and converted for most people's needs. Really great work! 

Last but certainly not least, the amazing team at [mamedev.org](https://www.mamedev.org/) for preserving all of this gaming history into one place.

### How to use :

- Customize the template files in templates/. Keep what you want, customize, delete the rest.
  - See the [documentation](templates/README.md) for more information on what each template does.
- Extract or Download the MAME XML file and place it somewhere (I use the dat/ subdirectory for my tests but it doesn't matter)
- View/Edit and then execute the createDats.sh script. It's just a simple for loop that runs xsltproc on everything in templates/ and takes the MAME XML file as an input parameter. It uses the source filename as a template for what the output file names are and places all output into output/. Customize to your liking.
  - Example : createDats.sh dat/mame0281.xml
- View resulting output in the output/ directory.
- Import DAT files into your favorite tool (ROMVault, Igir, etc) - Don't forget to set your split/merged settings before organizing ROMs. :)
  - If you're building a subset collection from your main collection, check out igir and use 'igir link' to create hardlinks instead of copies. Igir supports hard links (the default), sym links, and ref links. See the [documentation](https://igir.io/commands/#link) for more information.

### Results :

Here you can see the results of the MAME 0.281 XML using the default templates from this repository (as of 2025-10-07). If you look at the "missing" counts you can see the substantial difference in the number of files per set.
![Screenshot of DATs generated from the MAME 0.281 XML inside of ROMVault.](https://github.com/ekrunch/MAME-FilteredDATCreator/blob/main/MAME-FilteredDATCreator-Results.png?raw=true)
